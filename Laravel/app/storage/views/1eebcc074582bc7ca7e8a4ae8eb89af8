<?php $__env->startSection('head'); ?>
    <style>
        body{
            padding-top: 70px;
        }
		
		option{
			height:40px;
		}
		
		.header{
            font-style: italic;
            font-weight: bold;
        }
		
		thead {
			background-color: rgb(200, 200, 200);
		 }
    	 
		.label{
			white-space: nowrap;
			text-overflow: ellipsis;
			display: block;
			overflow: hidden
		}
    </style>
	<script>
		function setPossesion(id)
		{
			document.getElementById('possesion').value = id;
		}
	</script>

 <?php $__env->stopSection(); ?>

 <?php $__env->startSection('content'); ?>

		<div class="row">
		<div class="col-sm-3">
			<div class="header"><h4>Series</h4></div>
				<form role="search">
					<div class="form-group">
                         <input type="text" placeholder="Search" class="form-control">
                    </div>
                </form>
				<select class="form-control" multiple="" onchange="location=this.options[this.selectedIndex].value">
					<?php
						$series = CostumeTypeModel::all();
						//echo $costumeType;
						if(count($series) != 0)
						foreach($series as $cT){
							$igumani = $cT->costumes()->getResults();
							if(count($igumani) == 0){
									if($cT == $costumeType)
										echo '<option value ="'.route('emptyPage',$cT->id).'" selected>'.$cT->name.'</option>';
									else
								//echo '<option>'.$cT->name.'</option>';
										echo '<option value ="'.route('emptyPage',$cT->id).' ">'.$cT->name.'</option>';
									continue;
							}
							$i = $igumani[0];
							if($cT == $costumeType)
								echo '<option value ="'.route('costumes.show',$i->id).'" selected>'.$cT->name.'</option>';
							else
								//echo '<option>'.$cT->name.'</option>';
								echo '<option value ="'.route('costumes.show',$i->id).' ">'.$cT->name.'</option>';
						}
					?>
				</select>
				<br/>

			<form id="add_costumeType" method="POST" class="form-horizontal" action="<?php echo URL::route('add.costumetype'); ?>">
				<div class="input-group">
					<input type="text" id="costume_type" name="costume_type" class="form-control" placeholder="Costume type...">
					<span class="input-group-btn">
						<button type="submit" class="btn btn-default" type="button">Add</button>
					</span>
				</div>
			</form>
		</div>
        <div class="col-sm-3">
			<div class="header"><h4>Red Costumes</h4></div>
				<form role="search">
					<div class="form-group">
                         <input type="text" placeholder="Search" class="form-control">
                    </div>
                </form>
				<select class="form-control" multiple="" size = "4" onchange="location=this.options[this.selectedIndex].value">
					<?php
						//echo $costumeType;
						if(count ($costumes) != 0){
						foreach($costumes as $c)
							if($c == $costume)
								echo '<option value ="'.route('costumes.show',$c->id).' " selected >'.$c->identifier.'</option>';
							else
								echo '<option value ="'.route('costumes.show',$c->id).' ">'.$c->identifier.'</option>';
						}
					
					?>
				</select>
				<br/>
			<form id="add_costume" method="POST" class="form-horizontal" action="<?php echo URL::route('add.costume'); ?>">
				<div class="input-group">
					<input type="hidden" name="id" value="<?php echo count($costumeType) == 0 ? 0 : $costumeType->id;?>" />
					<input type="text" id="costume_name" name="costume_name" class="form-control" placeholder="Costume name...">
					<span class="input-group-btn">
						<button  type="submit" class="btn btn-default" type="button">Add</button>
					</span>
				</div>
			</form>
		</div>

	<?php echo Form::open(['method' => 'PUT', 'class'=>"form-horizontal", 'route' => ['costumes.update', count($costume) == 0 ? 1 : $costume->id]]); ?>


		<div class="col-sm-2 form-group" style="margin-top: 3%;">
			<label for="name">Name</label><br/>
			<?php 
				if( count($costume) != 0 ) 
					echo '<input type="text" id="name" name="name" value ="'.$costume->identifier.'" class="form-control input-sm />"';
				else 	
					echo '<input type="text" id="name" name="name" class="form-control input-sm />"';
			?>
			<label for="size">Size</label><br/>
			<?php 
				if( count($costume) != 0 ) 
					echo '<input type="text" id="size" name="size" value ="'.$costume->size.'" class="form-control input-sm />"';
				else 	
					echo '<input type="text" id="size" name="size" class="form-control input-sm />"';
			?>
			<label for="possesion">Possesion</label><br/>
			<?php

			$users = UserModel::all();
			echo '<div align="center">
				<select name="users" class="form-control input-sm" onchange="setPossesion(this.options[this.selectedIndex].value)">';
					foreach($users as $usr)
						if(count($costume) != 0){
							if($costume->owner == $usr->id )
								echo '<option selected value="'.$usr->id.'">'.$usr->first_name.' '.$usr->last_name.'</option>';
							else
								echo '<option value="'.$usr->id.'">'.$usr->first_name.' '.$usr->last_name.'</option>';
						}
						else echo '<option value="'.$usr->id.'">'.$usr->first_name.' '.$usr->last_name.'</option>';
				echo '</select>';

			echo '<input type="hidden" id="possesion" name="possesion" value="';
			if(count($costume) != 0)
				echo $costume->owner;

			echo '"/>';


			/*if( count($costume) != 0 ) {
				$user_in_posesion = $costume->userInPossesion()->getResults();
				echo '<input type="text" id="possesion" name="possesion" value ="'.$costume->owner.'" class="form-control input-sm />"';
			}
			else 
				echo '<input type="text" id="possesion" name="possesion" class="form-control input-sm />"';
			*/?>
			
			</div>

			<div class="form-group">
				<!-- Do NOT use name="submit" or id="submit" for the Submit button -->
				<button type="submit" class="btn btn-success btn-xs">Save</button>
			</div>

	<?php echo Form::close(); ?>






		</div>
        <div class="col-sm-4">
		
			<div class="header"><h4>Users</h4></div>
			<ul class="nav nav-tabs">
				<li class="active"><a href="#know" data-toggle="tab" aria-expanded="true">Can wear</a></li>
				<li class=""><a href="#other" data-toggle="tab" aria-expanded="true">Can't wear</a></li>
			</ul>
			<div id="myTabContent" class="tab-content">
				<div class="tab-pane fade active in" id="know">
					<form role="search">
						<div class="form-group">
                            <input type="text" placeholder="Search" class="form-control">
                        </div>
                    </form>
					
					<form id="registrationForm" method="POST" class="form-horizontal" action="<?php echo URL::route('removeFromCanWear'); ?>">
						
						<input type="hidden" name="id" value="<?php echo ($costume != [] ? $costume->id:0); ?>" />
						<select name="know[]" class="form-control" multiple="" onChange="alertselected(this)"> 
							<?php
								
								foreach($wearUsers as $user){
									echo '<option id="1" value="'.$user->id.'">'.$user->username.'</option>';
								}
							?>
							
						</select>
						
						<div class="form-group">
                        <div class="col-sm-9 col-sm-offset-3">
                            <!-- Do NOT use name="submit" or id="submit" for the Submit button -->
                            <button type="submit" class="btn btn-default">Remove</button>
                        </div>
						</div>
				</form>			
				</div>
				
				
				<div class="tab-pane fade" id="other">
					<form role="search">
						<div class="form-group">
                            <input type="text" placeholder="Search" class="form-control">
                        </div>
                    </form>
					
					 <form id="registrationForm" method="POST" class="form-horizontal" action="<?php echo URL::route('addToCanWear'); ?>"> 
						
						<input type="hidden" name="id" value="<?php echo ($costume != [] ? $costume->id:0);?>" />
						
						<select name="other[]" class="form-control" multiple="" onChange="alertselected(this)"> 
							<?php  
								foreach($otherUsers as $user){
									echo '<option value="'.$user->id.'">'.$user->username.'</option>';
								}
							?>
						
						</select>
						
						<div class="form-group">
                        <div class="col-sm-9 col-sm-offset-3">
                            <!-- Do NOT use name="submit" or id="submit" for the Submit button -->
                            <button type="submit" class="btn btn-default">Add</button>
                        </div>
						</div>
					</form>
				</div>

			</div>
		</div>

    </div>
<?php $__env->stopSection(); ?>
<?php echo $__env->make('layout', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>